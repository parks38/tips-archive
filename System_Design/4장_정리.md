
### π“  μ²λ¦¬μ¨ μ ν• μ¥μΉλ€ 
 λ„¤νΈμ›ν¬ μ‹μ¤ν…μ—μ„ μ²λ¦¬μ¨ μ ν• μ¥μΉλ€, ν΄λΌμ΄μ–ΈνΈ λλ” μ„λΉ„μ¤κ°€ λ³΄λ‚΄λ” νΈλν”½μ μ²λ¦¬μ¨(rate) μ„ μ μ–΄ν•κΈ° μ„ν• μ¥μΉμ΄λ‹¤.
μ—¬κΈ°μ„ νΈλν”½μ΄λ€, μΈν„°λ„·μƒμ—μ„ μ†΅μμ‹  λλ” λ¨λ“  ν†µμ‹ μ μ–‘μ„ μλ―Έν•©λ‹λ‹¤.  

[μ¥μ ]
- DoS κ³µκ²©μ— μν• μμ› κ³ κ° λ°©μ§€
- λΉ„μ© μ κ°
    - μ¶”κ°€ μ”μ²­μ— λ€ν• μ²λ¦¬λ¥Ό μ ν• β†’ μ„λ²„λ¥Ό λ§μ΄ λ‘μ§€ μ•μ•„ λ¨ (λ§ κ·Έλ€λ΅, μ ν•μ΄λΌκ³  μƒκ°)
    - third-party API μ λ¶ν•„μ”ν• κ³ΌκΈμ„ λ°©μ§€ β†’ ex) μ‹ μ© μ΅°ν, κ²°μ  api λ“±λ“±
- μ„λ²„ κ³Όλ¶€ν• λ°©μ§€
    - λ΄‡μ—μ„ μ¤λ” νΈλν”½μ΄λ‚ μ‚¬μ©μμ μλ»λ μ΄μ© ν¨ν„΄μΌλ΅ μ λ°λ νΈλν”½μ„ κ±Έλ¬λ‚΄λ”λ° μ²λ¦¬μ¨ μ ν• μ¥μΉλ¥Ό ν™μ©  

### μ²λ¦¬μ¨ μ ν• μ¥μΉμ μ μ–΄ μ„μΉ 

1) ν΄λΌμ΄μ–ΈνΈ

- ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ€ μ‰½κ² μ„λ³€μ΅°κ°€ κ°€λ¥ν•κΈ° λ•λ¬Έμ—, μΌλ°μ μΌλ΅ ν΄λΌμ΄μ–ΈνΈλ” μ²λ¦¬μ¨ μ ν•μ„ μ•μ •μ μΌλ΅ κ±Έ μ μλ” μ¥μ†κ°€ λμ§€ λ»ν•©λ‹λ‹¤.
- λν•, λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ κµ¬ν„μ„ ν†µμ ν•λ” κ²ƒλ„ μ–΄λ ¤μΈ μ μμµλ‹λ‹¤.
 

2) μ„λ²„

- μ²λ¦¬μ¨ μ¥μΉλ¥Ό μ„λ²„μ½μ— λ‘”λ‹¤λ©΄, μ„λ²„ 1κ³³μ—μ„λ§ κ΄€λ¦¬λ¥Ό ν•λ©΄ λκ³ , λ‚΄λ¶€μ—μ„λ§ ν†µμ ν•κ² λ©λ‹λ‹¤.
- μ²λ¦¬μ¨ μ ν• μ¥μΉλ¥Ό API μ„λ²„μ— λ‘λ” λ€μ‹ , λ―Έλ“¤μ›¨μ–΄λ¥Ό λ§λ“¤μ–΄ μ„λ²„λ΅ μ¤κΈ° μ „μ— ν†µμ ν•λ” λ°©λ²•λ„ μ΅΄μ¬ν•λ‹¤κ³  ν•©λ‹λ‹¤.

### π“ μ²λ¦¬μ¨ μ ν• μ•κ³ λ¦¬μ¦  
1. ν† ν° λ²„ν‚·(token bucket)
2. λ„μ¶ λ²„ν‚·(leaky bucket)
3. κ³ μ • μλ„ μΉ΄μ΄ν„°(fixed window counter)
4. μ΄λ™ μλ„ λ΅κ·Έ(sliding window log)
5. μ΄λ™ μλ„ μΉ΄μ΄ν„°(sliding window counter)

### μ²λ¦¬μ¨ ν•λ„ μ΄κ³Ό νΈλν”½μ μ²λ¦¬  
- ν•λ„ μ ν•μ— κ±Έλ¦° λ©”μ„Έμ§€λ” λ‚μ¤‘μ— μ²λ¦¬ν•λ ¤ λ©”μ„Έμ§• νμ— μ €μ¥ν•λ‹¤.  

### λ¶„μ‚° ν™κ²½μ—μ„μ μ²λ¦¬μ¨ μ ν• μ¥μΉμ κµ¬ν„  
- κ²½μ μ΅°κ±΄ (race condition) 
- λ™κΈ°ν™” (synchronization)  

π“— 1) κ²½μ μ΅°κ±΄ (race condition)

[μ²λ¦¬μ¨ μ ν•μ¥μΉμ κ°„λ‹¨ν• λ™μ‘κ³Όμ •]

- λ λ””μ¤μ—μ„ μΉ΄μ΄ν„°μ κ°’μ„ μ½λ”λ‹¤.
- counter +1 μ κ°’μ΄ μ„κ³„μΉλ¥Ό λ„λ”μ§€ λ³Έλ‹¤.
- λ„μ§€ μ•λ”λ‹¤λ©΄ λ λ””μ¤μ— λ³΄κ΄€λ μΉ΄μ΄ν„° κ°’μ„ 1λ§νΌ μ¦κ°€μ‹ν‚¨λ‹¤.

[κ²½μμ΅°κ±΄μ΄ μΌμ–΄λ‚λ” μ΄μ ]

- λ³‘ν–‰μ„±μ΄ μ‹¬ν• ν™κ²½μ—μ„λ”, λ‘ κ°μ μ”μ²­μ„ μ²λ¦¬ν•λ” μ¤λ λ“κ°€, ν•λ‚μ κ°’μ„ λ™μ‹μ— λ°”κΎΌλ‹¤κ³  ν•μ€μ„ λ–„ κ²½μμ΄ μΌμ–΄λ‚  μ μλ‹¤.
- μ΄λ ‡κ² λλ©΄, λ°μ΄ν„°μ μ •ν•©μ„±μ΄ κΉ¨μ§€λ” μ‹¬κ°ν• λ¬Έμ κ°€ λ°μƒν•  μ μμµλ‹λ‹¤.

[κ²½μμ΅°κ±΄ ν•΄κ²° λ°©λ²•]
- κ°€μ¥ λ³΄νΈμ μΈ λ°©λ²•μ€ λ½ (μ΄μ „ κΈ€μ—μ„ μ“΄ λ™μ‹μ„± μ²λ¦¬ λ°©λ²• μμ λ“¤ μ°Έκ³ ν•μ…”λ„ μΆ‹μ„κ±°κ°™μ•„μ”)
- λ£¨μ•„ μ¤ν¬λ¦½νΈ (Lua Script)
    - μ μ°¨μ§€ν–¥μ  μ„ μ–Έν• μ–Έμ–΄λΌκ³  ν•λ”λ°.. μ•„λ§ μμ°¨μ μΌλ΅ μ‹¤ν–‰μ‹μΌμ„ κ²½μμ„ μ—†μ•¤λ‹¤λ” λλ‚ κ°™μµλ‹λ‹¤. 
- λ λ””μ¤ μ •λ ¬ μ§‘ν•© (redis sorted set)
    - μ°Έκ³ λ¬Έν—μ„ λ³΄λ©΄ sorted set μ— νΉλ³„ν• κΈ°λ¥μ΄ μμ–΄μ„ κ²½μ μ΄μλ¥Ό ν•΄κ²°ν•λ” κ²ƒμ€ μ•„λ‹μ€μΌλ©°, λ΅μ§μ λ¬Έμ μ€λ‹¤κ³  ν•©λ‹λ‹¤.
    - μ°Έκ³  λ¬Έν— : https://engineering.classdojo.com/blog/2015/02/06/rolling-rate-limiter/
 

π“—  2) λ™κΈ°ν™” (synchronization)

λ¶„μ‚° μ„λΉ„μ¤ ν™κ²½μ—μ„, μ—¬λ¬λ€μ μ²λ¦¬μ¨ μ ν• μ¥μΉλ¥Ό μ‚¬μ©ν•  κ²½μ° μ”μ²­ λν• λ¶„μ‚°λκΈ° λ•λ¬Έμ—, μ²λ¦¬μ¨ μ¥μΉκ°„μ (Counting κ°’) λ™κΈ°ν™”κ°€ ν•„μ”ν•©λ‹λ‹¤ .


ν•΄κ²° λ°©λ²•

1. κ³ μ • μ„Έμ… (Sticky session)

κ³ μ • μ„Έμ… (Sticky session) μ„ μ‚¬μ©ν•μ—¬ κ°™μ€ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„°μ μ”μ²­μ€ ν•­μƒ κ°™μ€ μ²λ¦¬μ¨ μ ν• μ¥μΉλ΅ λ³΄λ‚Ό μ μλ„λ΅ ν•μ—¬ ν•΄κ²°ν•  μ μμ§€λ§, ν™•μ¥μ΄ λ¶κ°€ν•κ³  μ μ—°ν•μ§€ μ•κΈ°λ–„λ¬Έμ— μ¶”μ²ν•μ§€ μ•λ”λ‹¤κ³  ν•©λ‹λ‹¤.

2. μ¤‘μ•™ μ§‘μ¤‘ν• λ°μ΄ν„° μ €μ¥μ

λ λ””μ¤μ™€ κ°™μ€ μ¤‘μ•™ μ§‘μ¤‘ν• λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ‚¬μ©ν•λ”κ²ƒμ΄ λ” λ‚μ€ ν•΄κ²°μ±…μ΄λΌκ³  ν•©λ‹λ‹¤.
 

