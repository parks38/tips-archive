## CQRS 패턴이란 ? 
----
- Command Query Responseibility Segregation  
- 명령과 조회의 책임을 분리하는 패턴  
- 읽기와 쓰기 작업을 분리함으로 유연성과 확장성을 개선하는데 도움 됨.  

> 핵심 원칙

- 명령(Command)과 조회(Query) 작업을 분리
    - 명령은 상태를 변경하는 작업으로 데이터를 저장하거나 업데이트하는 등의 동작을 수행
    - 조회는 데이터를 읽어오는 작업으로, 읽기 전용 데이터베이스 또는 캐시에서 데이터를 가져옴
- 명령과 조회에 대한 모델을 별도로 유지
    - 명령 모델은 변경 작업을 처리하고 도메인 규칙을 적용하는 데 집중
    - 조회 모델은 데이터를 효율적으로 검색할 수 있는 구조로 설계
- 명령과 조회에 대한 데이터 저장소를 분리
    - 명령은 일반적으로 트랜잭션을 지원하는 데이터베이스를 사용하고, 조회는 읽기 전용 데이터베이스 또는 캐시를 사용


> 구성 요소  

- 명령 핸들러(Command Handler)
    - 명령을 처리하고 관련 도메인 로직을 실행 > 명령을 받으면 명령 객체의 데이터를 분석하고, 도메인 모델을 업데이트하거나 데이터 저장소에 변경을 반영
- 조회 모델(Query Model)
    - 읽기 작업에 사용되는 모델로, 데이터를 효율적으로 검색할 수 있는 구조로 설계됩니다. 일반적으로 읽기 성능을 향상시키기 위해 NoSQL 데이터베이스나 캐시를 사용합니다.

- 이벤트 버스(Event Bus)
    - 명령 실행 또는 데이터 변경 시 발생하는 이벤트를 다른 구성 요소에게 전달하는 데 사용됩니다. 이벤트는 도메인 이벤트 또는 상태 변경 알림 등으로 정의될 수 있습니다.

> 장점 

- 성능 향상: CQRS는 읽기 작업과 쓰기 작업을 분리하므로 각 작업에 최적화된 데이터 모델과 저장소를 사용할 수 있습니다. 이는 읽기 작업에 대한 성능을 향상시킬 수 있습니다.

- 확장성: CQRS는 읽기와 쓰기 작업을 분리하고, 각 작업에 맞는 서비스를 별도로 확장할 수 있습니다. 따라서 읽기와 쓰기 작업의 트래픽 패턴이 다른 경우에도 확장성을 유연하게 적용할 수 있습니다.

- 복잡한 도메인 모델 지원: CQRS는 도메인 모델의 복잡성을 다루기에 적합합니다. 읽기 작업과 쓰기 작업을 분리함으로써 도메인 모델을 단순화하고, 명령 모델과 조회 모델을 각각에 맞게 설계할 수 있습니다.  

> MVC 모델과의 차이점?  
- 목적: MVC 패턴은 사용자 인터페이스와 비즈니스 로직을 분리하여 애플리케이션의 구조를 조직화하는 데 중점을 둡니다. 반면에 CQRS 패턴은 명령과 조회의 책임을 분리하여 읽기와 쓰기 작업을 최적화하는 데 초점을 맞춥니다.

- 데이터 흐름: MVC 패턴은 사용자의 요청이 컨트롤러를 통해 모델을 업데이트하고, 업데이트된 모델을 뷰에 전달하여 사용자에게 표시합니다. 이는 단방향 데이터 흐름입니다. CQRS 패턴은 명령과 조회 작업을 별도로 다루기 때문에, 명령은 모델을 업데이트하고, 이벤트를 발생시켜 다른 부분에 변경 사항을 알립니다. 조회는 독립적으로 데이터를 읽어오는 구조입니다.

- 데이터 모델: MVC 패턴은 단일 모델을 사용하여 읽기와 쓰기 작업을 처리합니다. CQRS 패턴은 명령 모델과 조회 모델을 분리하여 각각에 맞는 데이터 구조를 사용합니다.

- 확장성: CQRS 패턴은 읽기와 쓰기 작업을 분리하여 서비스를 독립적으로 확장할 수 있습니다.  MVC 패턴은 주로 사용자 인터페이스의 확장성을 고려하여 설계됩니다.  

 ✅ CQRS 패턴은 명령과 조회의 책임을 분리하여 성능, 확장성 및 복잡한 도메인 모델을 처리하는 데 도움을 줍니다. 반면에 MVC 패턴은 사용자 인터페이스와 비즈니스 로직을 구조화하는 데 중점을 둡니다.  

 * [Order API CQRS Example](https://github.com/venubothsa/order-management-api)

* [CQRS and Event Sourcing](https://github.com/asc-lab/java-cqrs-intro)


* [CQRS 패턴](https://recordsoflife.tistory.com/661)
* [배달의 민족 CQRS](https://jaimemin.tistory.com/2203) 
* [CQRS 패턴 예시](https://github.com/AleksK1NG/Java-Spring-CRQS-Eventsourcing-Microservice/tree/master/src/main/java/com/eventsourcing/bankAccount)

* [CQRS-메세징 큐](https://velog.io/@dasd412/%EC%B9%B4%ED%94%84%EC%B9%B4-%EB%A9%94%EC%8B%9C%EC%A7%95-%EC%B6%94%EA%B0%80-%EB%B0%8F-CQRS-%ED%8C%A8%ED%84%B4-%EB%8F%84%EC%9E%85)

- https://github.com/Kwoojong/Instagram-Spring
- https://github.com/SeungHyeon12/numble_coupon
- https://mrwersa.medium.com/cqrs-pattern-with-kafka-streams-part-1-112f381e9b98  