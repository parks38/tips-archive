OSI 7 계층과 그 존재 이유
----

#### | 요약 
OSI 7 계층이 필요한 이유는 특정 한 곳에 이상이 생기면 다른 단계의 장비를 건드리지 않고 이상이 생긴 단계만 고칠수 있으며 <mark>통신이 일어나는 과정을 단계별로 파악이 가능</mark>하다. 

[계층]
* 물리계층 - 데이터 전기적인 신호로 변환해서 주고 받는 기능 ex. `통신 케이블, 리피터, 허브`
* 데이터링크  - 에러검출/재전송/흐름제어 ex. 브릿지/스위치
* 네트워크 - 주소부여(IP), 경로 설정(route) ex. router
* 전송 - 패킷 생성(`오류 검출 및 복구, 흐름제어, 중복검사`) ex. UDP/TCP 
* 세션 - 데이터가 통신하기 위한 논리적 연결 ex. TCP/IP 세션 책임
* 표현 -  명령어를 완성 및 결과 표현 (포장/압푹/암호화) ex. MIME, 암호화
* 응용 - 일반적인 응용서비스 수행(HTTP/SMTP)


#### OSI 7 계층 
- 네트워크 통신이 일어나는 과정 7 단계 
- 통신이 일어나는 과정이 단계별로 파악 가능하다. 
- 7단계 중 특정한 곳에 이상이 생기면 다른 단계의 장비 및 소프트웨어를 건들이지 않고도 이상이 생긴 단계만 고칠 수 있기 때문이다.
	(It is because of the fact that it will be **easy for troubleshooting the network problems**. 
	Only the layer in which the problem exist will be modified. Other layers are left untouched.)

![osi7계층](/TIL/img/Pasted%20image%2020221208093727.png)


> 물리 계층 (1계층) 

<mark>전기적, 기계적, 기능적인 특성</mark>을 이용해 `통신 케이블`로 데이터 전송한다. 
사용되는 통신 단위는 `비트`이며 0과 1으로 나타낸다. 
이 계층은 데이터를 전달만 할뿐 <mark>데이터가 무엇인지, 어떤 에러가 있는지는 신경쓰지 않는다</mark> 
데이터 전기적인 신호로 변환해서 주고 받는 기능만 담당하며 대표적 장비는 `통신 케이블, 리피터, 허브` 등이 있다. 

> 데이터 링크 계층 (2 계층)

keyword: 에러검출/재전송/흐름제어
물리 계층에서 송수신되는 <mark>정보의 오류와 흐름을</mark> 관리하여 <mark>안전한 정보의 전달 수행</mark>할수 있도록 도와주는 역할이다. 
오류도 찾아주고 재전송하는 기능도 가지고 있다. 
`맥 주소`를 가지고 통신을 한다. 이 계층 전송 단위를 `프레임`이라고 하고 대표적 장비는 `브리지, 스위츠`가 있다. 
**브릿지나 스위치를 통해 맥주소를 가지고 물리계층에서 받은 정보를 전달한다**

* `Point to Point` 간 신뢰성 있는 정보를 보장하기 위한 계층 CRC 기반의 오류 제어와 흐름 제어가 필요하다. 
	* Question : CRC 기반? 

주소값은 물리적으로 할당받는데 네트워크 카드가 만들어질때 MAC 주소가 정해져 있다. 
주소 체계는 계층이 없는 <mark>단일구조</mark> 이며 데이터링크 대표 장비는 `이더넷`이다. 
	 ✔️ `브리지`는 이더넷 장비를 물리적으로 연결하고 프레임의 전송거리를 연장한다. 동작원리는 MAC 주소 기반으로 팻킷을 분석하여 폐기하거나 전송한다.  => <mark>소프트웨어 기반</mark>
	 ✔️ `스위치`는 MAC 주소와 해당 장비의 포트번호가 기록된 MAC address 테이블을 보고 목적지에게만 프레임을 전송한다. (특정 포트로만 전송하기 떄문에 다른 포트와 충돌하지 않는다.) => <mark>하드웨어 기반</mark>
	 ✔️ `이더넷` CSMA/CD 방식의 LAN 지칭 용어로 네트워크에 연결된 각 기기들이 48비트 길이의 고유의 MAC 주소를 가지고 상호 간에 데이터를 주고받을 수 있도록 만들어졌다. 각 기기를 연결 시키는데는 `허브, 스위치, 리피터`등의 장치를 사용한다. 
* HDLC나 ADCCP 같은 포인트 투 포인트(point-to-point) 프로토콜이나 패킷 스위칭 네트워크나 LLC, ALOHA 같은 근거리 네트워크용 프로토콜

![[Pasted image 20221208103218.png]]


> 네트워크 계층 (3 계층)

keyword: 주소부여(IP), 경로 설정(route)
<mark>데이터를 목적지까지 안전하고 빠르게 전달하는 기능(라우팅)</mark>을 담당하고 있다. 
경로를 선택하고 주소를 정하고 경로에 따라 팻킷을 전달해주는 계층이다. 
대표적 장비는 `라우터` 이며 <mark>라우팅, 흐름제어, 세그멘테이션(segmentation/desegmentation), 오류 제어, 인터네트워킹(itnernetoworking)</mark> 등을 수행한다. 
데이터를 연결하는 다른 네트워크를 통해 전달함으로써 인터넷을 가능하게 만들며 IP 를 관리자가 직접 주소를 할당하는 구조로 계층적이다(hierarchical). 

- IP 계층 : TCP/IP 상 네트워크 주소를 정의하고 <mark>IP 패킷의 전달 및 라우팅을 담당하는 계층</mark> 이다. 하위 계층인 데이터링크 계층의 하드웨어적 틍성관계없이 독립적인 역할을 수행한다. 
	- 주요 프로토콜 
		- 패킷의 전달을 책임지는 IP
		- 패킷 전달 에러의 보고 및 진단을 위한 ICMP 
		- 복잡한 네트워크에서 인터네트워킹을 위한 경오를 찾게해주는 라우팅 프로토콜 

* IP 프로토콜 : `routing/ addressing` 
	* 신뢰성 및 흐름제어 기능이 없어 신뢰성 확보를 위해 TCP 와 같은 상위 트랜스포트 계층에 의존 필요하다. 

> 전송 계층 (4 계층)

keyword: 패킷 생성 (assembly/sequencing/deassembly/error detection/request repeat/flow control) 및 전송
`통신 활성호`를 위한 계층이며 <mark>양 끝단의 사용자들이 신뢰성 있는 데이터를 주고 받을수 있도록</mark> 해주어 상위 계층들은 데이터 전달의 유효성이나 효율성은 고려하지 않도록 해준다. 
특정 연결의 유효성을 제어하고, 일부 프로토콜은 상태 개념이 있고 (stateful), connection oriented(연결 기반)이다. 
주요 기능은 `오류 검출 및 복구, 흐름제어, 중복검사`를 수행한다. 
ex. TCP/UDP
| 종류           | TCP            | UDP                     |
| -------------- | -------------- | ----------------------- |
| 연결방식       | 연결형         | 비연결형                |
| 패킷 교환 방식 | 가상 회선 방식 | 데이터그램 방식         |
| 전송 순서      | 순서 보장      | 순서가 바뀔수 있음      |
| 수신 여부 확인 | 수신 여부 확인 | 수신 여부 확인하지 않음 |
| 통신 방식      | 1:1            | 1:1 OR 1:N OR N:N       |
| 신뢰성         | 높다           | 낮다                    |
| 속도           | 느리다         | 빠르다                        |


> 세션 계층 (5 계층)

keyword: TCP/IP 세션을 만들고 없애는 책임을 진다. 
<mark>데이터가 통신하기 위한 논리적 연결</mark>을 한다. 
4 계층과 달리 응용 프로그램 관점에서 봐야하며 `세션설정, 유지, 종료, 전송 중단시 복구`등의 기능이 있다.
양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공한다
* 동시 송수신 방식(duplex)
* 반이중 방식(half-duplex)
* 전이중 방식(full duplex)
* 체크 포인팅, 우휴, 종료, 다시 시작 과정 수행
통신을 하기 위한 세션을 확립/유지/중단 `(운영체제가 해줌)`을 한다.
   ✔️ **프로그램 영역** 

> 표현 계층 (6 계층 - presentation layer)

keyword : 명령어를 완성 및 결과 표현 (포장/압푹/암호화)
데이터 표현이 상이한 응용 프로세스의 독립성을 제공하고 암호화한다. 
코드 가느이 번역을 담당하여 사용자 시스템에서 데이터의 형식상 차이를 다루는
부담을 응용 계층으로부터 덜어준다. 
`MIME 인코딩`이나 `암호화` 등의 동작이 이루어 진다. 
ex. EBCDIC => ASCII 인코딩 , text/jpg/gif 구분 

> 응용 계층 (7 계층)

keyword: 응용 프로세스와 직접 관계하여 일반적인 응용서비스 수행![[Pasted image 20230103160111.png]]
<mark>HTTP, FTP, SMTP, POP3, IMAP, Telnet</mark> 등과 같은 프로토콜이 있다. 
통신 패킷들은 위 프로토콜에 의해 처리되며 브라우저들은 보다 쉽게 사용할수 있게 해주는 응용 프로그램이다. 
모든 통신의 양 끝단은 HTTP 와 같은 프로토콜이다 (응용 프로그램이 아니다!)
네트워크 소프트웨어 UI 부분을 담당하며 사용자의 입출력 (I/O) 부분을 담당한다. 


#### | 동작원리 

1.  OSI 7계층은 응용, 표현, 세션, 전송, 네트워크, 데이터링크, 물리계층으로 나뉨.
2.  전송 시 7계층에서 1계층으로 각각의 층마다 인식할 수 있어야 하는 헤더를 붙임(캡슐화)
3.  수신 시 1계층에서 7계층으로 헤더를 떼어냄(디캡슐화)
4.  출발지에서 데이터가 전송될 때 헤더가 추가되는데 2계층에서만 오류제어를 위해 꼬리부분에 추가됌
5.  물리계층에서 1, 0 의 신호가 되어 전송매체 (동축케이블, 광섬유 등)을 통해 전송
